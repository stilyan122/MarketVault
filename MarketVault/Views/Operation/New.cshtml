@model OperationFormModel

@{
    ViewBag.Title = "Choose type of operation";
}

<div class="chooseOperationContainer">
    <form 
        id="chooseOperationForm">
        <div>
            <div>
                <label asp-for="CounterPartyId">Select counter party</label>
                <select asp-for="CounterPartyId">
                    <option disabled selected value="">Select Counter Party...</option>
                    @foreach (CounterPartyViewModel counterParty in Model.CounterParties)
                    {
                        <option value="@counterParty.Id">@counterParty.Name</option>
                    }
                </select>
            </div>
            <span asp-validation-for="CounterPartyId"></span>
        </div>

        <div>
            <div>
                <label asp-for="DocumentTypeId">Select document type</label>
                <select asp-for="DocumentTypeId">
                    <option disabled selected value="">Select Document Type...</option>
                    @foreach (DocumentTypeViewModel documentType in Model.DocumentTypes)
                    {
                        <option value="@documentType.Id">@documentType.Name</option>
                    }
                </select>
            </div>
            <span asp-validation-for="DocumentTypeId"></span>
        </div>

        <button id="addNewProductToOperationBtn"
        >   
            Add New Product
        </button>

        <button id="addNewOperationBtn"
            >
            Add Operation
        </button>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}

<script>
    var newProductBtn = document.getElementById('addNewProductToOperationBtn');
    var newOperationBtn = document.getElementById('addNewOperationBtn');
    var form = document.getElementById('chooseOperationForm');

    newProductBtn.addEventListener('click', function (event) {
        event.preventDefault();

        form.setAttribute('action', '/Operation/AddProductToOperation');
        form.setAttribute('method', 'get');
        form.submit();
    });

    newOperationBtn.addEventListener('click', function (event) {
        event.preventDefault();

        form.setAttribute('asp-action', '/Operation/AddNewOperation');
    });

</script>